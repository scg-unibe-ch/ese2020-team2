

<mat-toolbar style=" background-color: rgba(92, 106, 121, 0.616 ); height: 7%;" >
  <span>FILTER:</span>
  <div class="btn-group">
  <button mat-button (click)= "changefiltervalue('sell');filter(minValue,maxValue,filtervalue,search)"  class="btn" style="background-color: rgba(42, 49, 56, 0.616);">FOR SALE</button>
  <button mat-button (click)="changefiltervalue('lend');filter(minValue,maxValue,filtervalue,search)" class="btn" style="background-color: rgba(42, 49, 56, 0.616);">TO RENT</button>
  <button mat-button (click)="changefiltervalue('product');filter(minValue,maxValue,filtervalue,search)" class="btn" style="background-color: rgba(42, 49, 56, 0.616);">PRODUCTS</button>
  <button mat-button (click)="changefiltervalue('service');filter(minValue,maxValue,filtervalue,search)" class="btn" style="background-color: rgba(42, 49, 56, 0.616);">SERVICES</button>
</div>
  <button mat-button (click)="changefiltervalue('');changeminValue(0);changemaxValue(50);changesearch('');filter(minValue,maxValue,'',search)"class="btn"  style="background-color: rgba(42, 49, 56, 0.616);">RESET FILTERS</button>
<span class="flexExpand"></span>


<ng5-slider style="width: 20%; color: black;" [(value)]="minValue" [(highValue)]="maxValue"   (userChangeEnd)="filter(minValue,maxValue,filtervalue,search)" [options]="options"></ng5-slider>
<span class="flexExpand"></span>
<span>
  <input type="text" [(ngModel)]="search">
</span>
<button [disabled]="search == ''" (click)="filter(minValue,maxValue,filtervalue,search)">Search</button>
</mat-toolbar>

<div class="outer">

    <div class="inner">


        <div class="content" fxLayout="row wrap" fxLayoutGap="2%" >
            <div fxFlex="23%" fxFlex.xs="100%" fxFlex.sm="33%" fxLayoutAlign=" stretch" *ngFor="let product of products$ | async">

              <mat-card *ngIf="product.userId == userId" style="background-color: darkgreen; opacity: 80%;" class="mat-elevation-z4">
                  <mat-card-title>{{product.title}}</mat-card-title>
                <mat-card-subtitle>
                  <mat-card-title *ngIf="product.sellOrLend =='sell'">For Sale: {{product.price}} Fr</mat-card-title>
                  <mat-card-title *ngIf="product.sellOrLend =='lend'">For Rent: {{product.price}} Fr</mat-card-title>
                </mat-card-subtitle>

                <img mat-card-image src="https://cdn.jpegmini.com/user/images/slider_puffin_before_mobile.jpg">
                <mat-card-content>
                  <p>{{product.piecesAvailable}}</p>
                  <p>Location: {{product.location}}</p>
                  <p>Delivery: {{product.deliveryPossible}}</p>
                  <p>buabua
                  </p>
                  <p>{{product.userId}}</p>
                  <p>{{userId}}</p>
                </mat-card-content>
                <mat-card-actions>
                  <div style="text-align: center;">
                  <button mat-button [routerLink]="['/product', product.productId]" style="width: 20%;">VIEW</button>
                    <button mat-button *ngIf = "(loggedIn$ | async) && product.sellOrLend == 'sell' && !(product.userId == userId)" (click)="buy(product);refresh()" type="submit" style="width: 20%;">BUY</button>
                    <button mat-button *ngIf = "(loggedIn$ | async) && product.sellOrLend == 'lend'" (click)="buy(product);refresh()" type="submit" style="width: 20%;">RENT</button>
                    <button mat-button *ngIf = "(loggedIn$ | async)" style="width: 20%;">WISH</button>
                  </div>
                    <p *ngIf = "!(loggedIn$ | async)" style="text-align: center; font-size: 120%;">Log in to buy item</p>

                    <button mat-button *ngIf = "!(loggedIn$ | async)"  routerLink="/login">TO LOGIN</button>
                     <button mat-button *ngIf = "!(loggedIn$ | async)" routerLink="/register">TO SIGN UP</button>
                  </mat-card-actions>
              </mat-card>

              <mat-card *ngIf="!(product.userId == userId)"  class="mat-elevation-z4">
                <mat-card-title>{{product.title}}</mat-card-title>
              <mat-card-subtitle>
                <mat-card-title *ngIf="product.sellOrLend =='sell'">For Sale: {{product.price}} Fr</mat-card-title>
                <mat-card-title *ngIf="product.sellOrLend =='lend'">For Rent: {{product.price}} Fr</mat-card-title>
              </mat-card-subtitle>

              <img mat-card-image src="https://cdn.jpegmini.com/user/images/slider_puffin_before_mobile.jpg">
              <mat-card-content>
                <p>{{product.piecesAvailable}}</p>
                <p>Location: {{product.location}}</p>
                <p>Delivery: {{product.deliveryPossible}}</p>
                <p>buabua
                </p>
                <p>{{product.userId}}</p>
                <p>{{userId}}</p>
              </mat-card-content>
              <mat-card-actions>
                <div style="text-align: center;">
                <button mat-button [routerLink]="['/product', product.productId]" style="width: 20%;">VIEW</button>

                <mat-form-field *ngIf = "(loggedIn$ | async) && !(product.userId == userId)" style="width: 25%;">
                  <mat-select [(value)]="quantity">
                    <mat-option value="1">1</mat-option>
                    <mat-option value="2">2</mat-option>
                    <mat-option value="3">3</mat-option>
                  </mat-select>
                </mat-form-field>
               <button mat-button *ngIf = "(loggedIn$ | async) && product.sellOrLend == 'sell' && !(product.userId == userId)" (click)="buy(product);refresh()" type="submit" style="width: 20%;">BUY</button>
                  <button mat-button *ngIf = "(loggedIn$ | async) && product.sellOrLend == 'lend'" (click)="buy(product);refresh()" type="submit" style="width: 20%;">RENT</button>
   
                  <button mat-button *ngIf = "(loggedIn$ | async)" style="width: 20%;">WISH</button>
                </div>
                  <p *ngIf = "!(loggedIn$ | async)" style="text-align: center; font-size: 120%;">Log in to buy item</p>

                  <button mat-button *ngIf = "!(loggedIn$ | async)"  routerLink="/login">TO LOGIN</button>
                   <button mat-button *ngIf = "!(loggedIn$ | async)" routerLink="/register">TO SIGN UP</button>
                </mat-card-actions>
            </mat-card>
            </div>
          </div>
  </div>
</div>

